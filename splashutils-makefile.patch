--- splashutils-0.9-pre10.orig/Makefile	2004-09-27 17:27:18.000000000 +0200
+++ splashutils-0.9-pre10/Makefile	2005-01-08 04:39:57.538991328 +0100
@@ -13,9 +13,6 @@
 DEBUG 	 = false		# set to true to prevent stripping
 K_SHARED = false		# set to true if you want to link to a shared klibc
 
-JPEGSRC	= libs/jpeg-6b
-LPNGSRC = libs/libpng-1.2.7
-ZLIBSRC = libs/zlib-1.2.1
 LIBCSRC	= libs/klibc-0.179/klibc
 
 prefix     =
@@ -51,12 +48,7 @@
 	   -D__KLIBC__ -DBITSIZE=$(BITSIZE) -I${ROOT}/$(LIBCSRC)/../include -I${ROOT}/linux/include $(MISCINCS) \
 	   -DWITH_ERRLIST -I${ROOT}/$(ZLIBSRC) -I/usr/include -ffunction-sections -fdata-sections -DTARGET_KERNEL
 
-PNGDEFS = -DPNG_NO_WRITE_tIME -DPNG_NO_FLOATING_POINT_SUPPORTED -DPNG_NO_WRITE_SUPPORTED -DPNG_NO_READ_iTXt \
-	  -DPNG_LEGACY_SUPPORTED -DPNG_NO_PROGRESSIVE_READ -DPNG_NO_MNG_FEATURES -DPNG_NO_CONSOLE_IO -DPNG_NO_READ_TRANSFORMS \
-	  -DPNG_READ_GRAY_TO_RGB_SUPPORTED -DPNG_READ_16_TO_8_SUPPORTED -DPNG_READ_STRIP_ALPHA_SUPPORTED \
-	  -DPNG_NO_ERROR_NUMBERS -DPNG_NO_EASY_ACCESS -DPNG_NO_READ_ANCILLARY_CHUNKS -DPNG_NO_INFO_IMAGE
-
-K_LDLIBS = $(JPEGSRC)/libjpeg.a $(LPNGSRC)/libpng.a $(ZLIBSRC)/libz.a
+K_LDLIBS = -ljpeg -lpng -lz
 
 # flags for the user utills
 CFLAGS = -Wall -g -I${ROOT}/linux/include
@@ -100,44 +92,7 @@
 	if ! make -q; then $(call info,MAKE,klibc) ; fi ; \
 	make > /dev/null
 
-zlib:	
-#	@$(call info,BUILD,zlib)
-	@cd $(ZLIBSRC) ; \
-	if [ ! -e ./Makefile ]; then \
-		$(call info,CONF,zlib) ; \
-		./configure > /dev/null; \
-		sed -i 's#^CFLAGS=\(.*\)#CFLAGS=\1 $(K_CFLAGS)#' Makefile ; \
-	fi ; \
-	if ! make -q libz.a; then $(call info,MAKE,zlib) ; fi ; \
-	make libz.a > /dev/null
-
-libpng:	zlib
-#	@$(call info,BUILD,libpng)
-	@cd $(LPNGSRC) ; \
-	if [ ! -e ./Makefile ]; then \
-		$(call info,CONF,libpng) ; \
-		cp scripts/makefile.linux Makefile > /dev/null; \
-		sed -i -e '/^CFLAGS/ { N ; s#^CFLAGS=.*#CFLAGS=$(K_CFLAGS) $(PNGDEFS)# ; P ; D }' \
-		       -e 's#^ZLIBINC=.*#ZLIBINC=$(ZLIBSRC)#' \
-		       -e 's#^ZLIBLIB=.*#ZLIBLIB=$(ZLIBSRC)#' Makefile ; \
-	fi ; \
-	if ! make -q libpng.a; then $(call info,MAKE,libpng) ; fi ; \
-	make libpng.a > /dev/null
-
-jpeglib:
-#	@$(call info,BUILD,libjpeg)
-	@cd $(JPEGSRC) ; \
-	if [ ! -e ./Makefile ]; then \
-		$(call info,CONF,libjpeg) ; \
-		./configure > /dev/null ; \
-		echo "#define NO_GETENV 1" >> jconfig.h ; \
-		sed -i "s#CFLAGS=.*#CFLAGS=$(K_CFLAGS)#" Makefile ; \
-		sed -i "s:#define JMESSAGE.*::" jerror.c ; \
-	fi ; \
-	if ! make -q libjpeg.a; then $(call info,MAKE,libjpeg) ; fi ; \
-	make libjpeg.a > /dev/null
-
-splash_kern: klibc jpeglib libpng $(SP_HELPER) $(LIBC) config.h $(K_LDLIBS)
+splash_kern: klibc $(SP_HELPER) $(LIBC) config.h $(K_LDLIBS)
 
 $(SP_HELPER): $(KOUT)/splash_kernel.o $(KOUT)/splash_dev.o $(KOUT)/splash_parse.o $(KOUT)/splash_render.o $(KOUT)/splash_unpack.o $(KOUT)/splash_cmd.o $(KOUT)/splash_common.o
 	@$(call info,LD,$@)
@@ -156,7 +111,7 @@
 	@$(call info,CC,$@)
 	@$(CC) $(CFLAGS) -DPKG_VERSION=\"$(PKG_VERSION)\" -c -o $@ $<
 
-clean:	clean_klibc clean_jpg clean_png clean_zlib clean_splash
+clean:	clean_klibc clean_splash
 
 clean_splash:
 	@$(call info,CLEAN,splash)
@@ -164,30 +119,6 @@
 	@rm -f kernel/*.o
 	@rm -f splash_helper splash_util splash_util.static
 
-clean_jpg:
-	@cd $(JPEGSRC) ; \
-	if [ -e Makefile ]; then \
-		$(call info,CLEAN,libjpeg) ; \
-		make clean > /dev/null ; \
-		rm Makefile ; \
-	fi
-
-clean_png:
-	@cd $(LPNGSRC) ; \
-	if [ -e Makefile ]; then \
-		$(call info,CLEAN,libpng) ; \
-		make clean > /dev/null ; \
-		rm Makefile ; \
-	fi
-
-clean_zlib:
-	@cd $(ZLIBSRC) ; \
-	if [ -e Makefile ]; then \
-		$(call info,CLEAN,zlib) ; \
-		make clean > /dev/null ; \
-		rm Makefile ; \
-	fi
-
 clean_klibc:
 	@cd $(LIBCSRC) ; \
 	$(call info,CLEAN,klibc) ; \
